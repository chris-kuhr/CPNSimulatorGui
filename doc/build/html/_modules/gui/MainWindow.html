<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>gui.MainWindow &mdash; Colored Petrinets Simulator Gui alpha 2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'alpha 2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Colored Petrinets Simulator Gui alpha 2 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for gui.MainWindow</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/python3</span>

<span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtSvg</span><span class="p">,</span> <span class="n">uic</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">deque</span>
<span class="kn">import</span> <span class="nn">logging</span>


<span class="kn">import</span> <span class="nn">snakes.plugins</span>
<span class="kn">from</span> <span class="nn">snakes.nets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span><span class="p">,</span> <span class="n">BytesIO</span>

<span class="kn">from</span> <span class="nn">inout.XMLIO</span> <span class="kn">import</span> <span class="n">XMLIO</span>

<span class="kn">from</span> <span class="nn">gui.DiagramEditor</span> <span class="kn">import</span> <span class="n">DiagramEditor</span>
<span class="kn">from</span> <span class="nn">gui.SubnetDialog</span> <span class="kn">import</span> <span class="n">SubnetDialog</span>
<span class="kn">from</span> <span class="nn">gui.DiagramScene</span> <span class="kn">import</span> <span class="n">DiagramScene</span>
<span class="kn">from</span> <span class="nn">gui.NameDialog</span> <span class="kn">import</span> <span class="n">NameDialog</span>
<span class="kn">from</span> <span class="nn">gui.LibraryModel</span> <span class="kn">import</span> <span class="n">LibraryModel</span>

<span class="kn">from</span> <span class="nn">model.AbstractItem</span> <span class="kn">import</span> <span class="n">Connector</span>
<span class="kn">from</span> <span class="nn">model.PlaceItem</span> <span class="kn">import</span> <span class="n">PlaceItem</span>
<span class="kn">from</span> <span class="nn">model.TransitionItem</span> <span class="kn">import</span> <span class="n">TransitionItem</span>
<span class="kn">from</span> <span class="nn">model.TokenItem</span> <span class="kn">import</span> <span class="n">TokenItem</span>
<span class="kn">from</span> <span class="nn">model.PortItem</span> <span class="kn">import</span> <span class="n">PortItem</span>
<span class="kn">from</span> <span class="nn">model.ArcItem</span> <span class="kn">import</span> <span class="n">ArcItem</span>

<span class="kn">from</span> <span class="nn">inout.XMLIO</span> <span class="kn">import</span> <span class="n">XMLIO</span>
<span class="kn">from</span> <span class="nn">model.CPNSimulator</span> <span class="kn">import</span> <span class="n">CPNSimulator</span>

    
<div class="viewcode-block" id="MainWindow"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow">[docs]</a><span class="k">class</span> <span class="nc">MainWindow</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The MainWindow is loaded by the application main loop.</span>
<span class="sd">    </span>
<span class="sd">    :member workingDir: Working directory.</span>
<span class="sd">    :member editors: List of all editors: `gui.DiagramEditor`.</span>
<span class="sd">    :member editorwidgets: List of all editor widgets.    </span>
<span class="sd">    :member logWidget: Log widget.</span>
<span class="sd">    :member tabWidget: Widget containing `editors[0]`, and the `logWidget`.</span>
<span class="sd">    :member simulator: `model.CPNSimulator` instance.   </span>
<span class="sd">    :member timer: Simulation timer.    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">workingDir</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Create the main window.</span>
<span class="sd">        </span>
<span class="sd">        The Class is initialized with the Layout, </span>
<span class="sd">        specified in the CPNSimGui.ui file in the directory: workingDir/gui/. </span>
<span class="sd">        </span>
<span class="sd">        :param workingDir: Working directory.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span> <span class="o">=</span> <span class="n">workingDir</span>          
        
        <span class="nb">super</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>         
        <span class="n">uic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">/gui/CPNSimGui.ui&#39;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>  
        
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span> <span class="o">=</span> <span class="p">[]</span>    
        <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>          
        
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>    
               
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">DiagramEditor</span><span class="p">(</span><span class="n">mainWindow</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">workingDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">700</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;Net&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>         
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="p">,</span> <span class="s2">&quot;Log&quot;</span><span class="p">)</span>   
        <span class="bp">self</span><span class="o">.</span><span class="n">verticalLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="p">)</span> 
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span> <span class="mi">1080</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralwidget</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">799</span><span class="p">,</span> <span class="mi">599</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">centralwidget</span><span class="o">.</span><span class="n">setMaximumSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="mi">1979</span><span class="p">,</span> <span class="mi">1079</span><span class="p">))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_4</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radioButton_2</span><span class="o">.</span><span class="n">toggle</span><span class="p">()</span> 
        
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span> <span class="o">=</span> <span class="n">CPNSimulator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>   
        
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QTimer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">forwardStep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">back2beginning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_2</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">backStep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_3</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">stopSim</span><span class="p">)</span>
<span class="c1">#         self.pushButton_4.connect(self.pushButton_4, QtCore.SIGNAL(&quot;toggled(bool)&quot;),self.editor.startSim)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_4</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_4</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">startSim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_5</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_5</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">forwardStep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_6</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_6</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">forward2lastStep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushButton_7</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pushButton_7</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;pressed()&quot;</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">resetSimulator</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionNew_Net</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actionNew_Net</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;triggered()&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">newNet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionOpen_Net</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actionOpen_Net</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;triggered()&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">loadNet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionSave_Net</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actionSave_Net</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;triggered()&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">saveNet</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">actionExport_Step_as_SVG</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">actionExport_Step_as_SVG</span><span class="p">,</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span><span class="s2">&quot;triggered()&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">export_Step_as_SVG</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit_2</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> </span><span class="si">%%</span><span class="s2">&quot;</span> <span class="o">%</span><span class="p">(</span> <span class="nb">int</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">diagramView</span><span class="o">.</span><span class="n">scaleFactor</span><span class="o">*</span><span class="mi">100</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineEdit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">displayStep</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">simulationStep</span> <span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newNet</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">showMaximized</span><span class="p">()</span>
    <span class="c1">#-------------------------------------------------------------------</span>
    
    
<div class="viewcode-block" id="MainWindow.newNet"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.newNet">[docs]</a>    <span class="k">def</span> <span class="nf">newNet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Create a new Petrinet.                </span>
<span class="sd">        </span>
<span class="sd">        This method resets the main editor widget. It deletes </span>
<span class="sd">        the previously loaded Petrinet, as well as any hierarchical subnet.  </span>
<span class="sd">                </span>
<span class="sd">        @param init: Load on startup?</span>
<span class="sd">        &#39;&#39;&#39;</span>
        
        <span class="k">for</span> <span class="n">transition</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visualTransitions</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transition</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">deleteItems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">transition</span><span class="p">])</span>
                
        <span class="k">for</span> <span class="n">editor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">editor</span><span class="p">)</span>  
        <span class="k">for</span> <span class="n">editorWidget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">del</span> <span class="n">editorWidget</span><span class="o">.</span><span class="n">editor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">editorWidget</span><span class="p">)</span> 
            
            
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">connectionList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">transitions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">places</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">if</span> <span class="n">init</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">subnets</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">subnets</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;None&quot;</span><span class="p">,[]]]</span>
           
                
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visualTransitions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visualPlaces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">visualConnectionList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">portConnections</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">diagramScene</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span> <span class="o">=</span> <span class="n">PetriNet</span><span class="p">(</span><span class="s2">&quot;Default&quot;</span><span class="p">)</span>                 
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">initialMarking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">get_marking</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s2">&quot;0DDF00D&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">resetSimulator</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;pyPetriNets - </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
                      
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">init</span><span class="p">:</span>                             
            <span class="bp">self</span><span class="o">.</span><span class="n">diag</span> <span class="o">=</span> <span class="n">NameDialog</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;PetriNet Name&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;unnamed&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">accepted</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">setNetName</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">diag</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  </div>
            
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
<div class="viewcode-block" id="MainWindow.addSubnetEditor"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.addSubnetEditor">[docs]</a>    <span class="k">def</span> <span class="nf">addSubnetEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subnet</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Create a subnet editor.</span>
<span class="sd">        </span>
<span class="sd">        @param subnet: The string name of the substitution transition, name of the subnet</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">SubnetDialog</span><span class="p">(</span><span class="n">mainWindow</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">subnet</span><span class="o">=</span><span class="n">subnet</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">editor</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">tokenListItems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">colorListWidget</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">tokenListItems</span> <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">colorListWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
    
<div class="viewcode-block" id="MainWindow.openSubnet"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.openSubnet">[docs]</a>    <span class="k">def</span> <span class="nf">openSubnet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Open subnet editor.</span>
<span class="sd">        </span>
<span class="sd">        :param transition: Substitution transition `model.TransitionItem`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">editorWidget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editorwidgets</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>            
            <span class="k">for</span> <span class="n">editor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">editorWidget</span><span class="o">.</span><span class="n">editor</span> <span class="o">==</span> <span class="n">editor</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span> <span class="o">==</span> <span class="n">transition</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                        <span class="n">editorWidget</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>
                                              
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
            
            
<div class="viewcode-block" id="MainWindow.importSubnet"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.importSubnet">[docs]</a>    <span class="k">def</span> <span class="nf">importSubnet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Import subnet into editor.</span>
<span class="sd">        </span>
<span class="sd">        :param transition: Substitution transition `model.TransitionItem`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Import Subnet&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/output/cpn/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">)</span> <span class="p">,</span> <span class="s2">&quot;*.xml&quot;</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span>  
                
        <span class="k">for</span> <span class="n">editor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span> 
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="o">.</span><span class="n">name</span> <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">loadNet</span><span class="p">(</span><span class="n">editor</span><span class="o">=</span><span class="n">editor</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span> <span class="n">subnet</span><span class="o">=</span><span class="n">transition</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">importSubnet</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
    
<div class="viewcode-block" id="MainWindow.saveNet"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.saveNet">[docs]</a>    <span class="k">def</span> <span class="nf">saveNet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Save Petrinet with respect to subnets to XML file.&#39;&#39;&#39;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Save Net&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/output/cpn/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">)</span> <span class="p">,</span> <span class="s2">&quot;*.xml&quot;</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span>    
        <span class="n">xmlnet</span> <span class="o">=</span> <span class="n">XMLIO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="p">,</span> <span class="n">rootElementName</span><span class="o">=</span><span class="s2">&quot;ColouredPetriNet&quot;</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">editor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">:</span>               
            <span class="n">newVisualConnectionList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">editor</span><span class="o">.</span><span class="n">visualConnectionList</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">arc</span><span class="p">,</span> <span class="n">ArcItem</span> <span class="p">):</span>
                    <span class="n">newVisualConnectionList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span> <span class="n">arc</span><span class="o">.</span><span class="n">srcConnector</span><span class="p">,</span> <span class="n">arc</span><span class="p">,</span> <span class="n">arc</span><span class="o">.</span><span class="n">dstConnector</span><span class="p">,</span> <span class="n">arc</span><span class="o">.</span><span class="n">srcConnector</span><span class="o">.</span><span class="n">idx</span><span class="p">,</span> <span class="n">arc</span><span class="o">.</span><span class="n">dstConnector</span><span class="o">.</span><span class="n">idx</span> <span class="p">]</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newVisualConnectionList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">arc</span> <span class="p">)</span>
            
            <span class="n">cpn</span> <span class="o">=</span> <span class="n">xmlnet</span><span class="o">.</span><span class="n">netToXML</span><span class="p">(</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">,</span> <span class="n">editor</span><span class="o">.</span><span class="n">visualPlaces</span><span class="p">,</span> <span class="n">editor</span><span class="o">.</span><span class="n">visualTransitions</span><span class="p">,</span> <span class="n">newVisualConnectionList</span><span class="p">)</span>
            
            <span class="n">logStringList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="p">):</span>
                <span class="n">lineItem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">item</span><span class="p">(</span> <span class="n">idx</span> <span class="p">)</span>
                <span class="n">logStringList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">lineItem</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span>
            
            <span class="n">xmlnet</span><span class="o">.</span><span class="n">saveLog</span><span class="p">(</span><span class="n">logStringList</span><span class="p">)</span>        
        <span class="n">xmlnet</span><span class="o">.</span><span class="n">saveNet</span><span class="p">(</span> <span class="n">filename</span> <span class="p">)</span>        </div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
    
<div class="viewcode-block" id="MainWindow.loadNet"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.loadNet">[docs]</a>    <span class="k">def</span> <span class="nf">loadNet</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">editor</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">subnet</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">importSubnet</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Load a net with subnets or import subnets from file.</span>
<span class="sd">        </span>
<span class="sd">        :param editor: `gui.DiagramEditor` to fill with the subnet. `editors[0]` if editor=none</span>
<span class="sd">        :param filename: The filename that is used when a new net is loaded.</span>
<span class="sd">        :param subnet: Subnet string name.</span>
<span class="sd">        :param importSubnet: Flag determining, whethera new net is loaded or a subnet is imported.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>                
            <span class="n">filename</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Open Net&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/output/cpn/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">)</span> <span class="p">,</span> <span class="s2">&quot;*.xml&quot;</span> <span class="p">)</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">return</span>        
            <span class="bp">self</span><span class="o">.</span><span class="n">newNet</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>  

        <span class="bp">self</span><span class="o">.</span><span class="n">connectArcs</span> <span class="o">=</span> <span class="p">[]</span>   
        <span class="n">tmpSubnets</span> <span class="o">=</span> <span class="p">[]</span>    
                
        <span class="n">xmlnet</span> <span class="o">=</span> <span class="n">XMLIO</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>     
        <span class="n">ret</span> <span class="o">=</span> <span class="n">xmlnet</span><span class="o">.</span><span class="n">loadNet</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>   
        
        <span class="n">subnetNames</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">serConnections</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">serPlaces</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">serTransitions</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
             
        <span class="k">if</span> <span class="n">importSubnet</span><span class="p">:</span>              
            <span class="n">importUniqueNameList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">place</span> <span class="ow">in</span> <span class="n">serPlaces</span><span class="p">:</span>
                <span class="n">unameContained</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">uName</span> <span class="ow">in</span> <span class="n">importUniqueNameList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">):</span>
                        <span class="n">unameContained</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">unameContained</span><span class="p">:</span>
                    <span class="n">importUniqueNameList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
                
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">serTransitions</span><span class="p">:</span>
                <span class="n">unameContained</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">uName</span> <span class="ow">in</span> <span class="n">importUniqueNameList</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">):</span>
                        <span class="n">unameContained</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">unameContained</span><span class="p">:</span>
                    <span class="n">importUniqueNameList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
                           
            <span class="n">newSerPlaces</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">newSerTransitions</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">newSerConnectionsFlagged</span> <span class="o">=</span> <span class="p">[]</span>
            
            <span class="k">for</span> <span class="n">connection</span> <span class="ow">in</span> <span class="n">serConnections</span><span class="p">:</span>                
                <span class="n">newSerConnectionsFlagged</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> 
                                                <span class="p">[</span> <span class="n">connection</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span> <span class="p">]</span> 
                                                <span class="p">)</span>    
            <span class="k">for</span> <span class="n">uName</span> <span class="ow">in</span> <span class="n">importUniqueNameList</span><span class="p">:</span>                                
                <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span> <span class="o">+=</span> <span class="mi">1</span>   
                             
                <span class="k">for</span> <span class="n">place</span> <span class="ow">in</span> <span class="n">serPlaces</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span>
                        <span class="n">place</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;p</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span> 
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="p">):</span> 
                            <span class="n">place</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                        <span class="n">newSerPlaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">place</span> <span class="p">)</span>
                        <span class="n">serPlaces</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span> <span class="n">place</span> <span class="p">)</span>
                        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">connectionFlagged</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">newSerConnectionsFlagged</span> <span class="p">):</span>
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> 
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;p</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>    
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> 
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;p</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>   
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>  
                            
                <span class="k">for</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">serTransitions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span> 
                        <span class="n">transition</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;t</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>  
                        <span class="n">newSerTransitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">transition</span> <span class="p">)</span>
                        <span class="n">serTransitions</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span> <span class="n">transition</span> <span class="p">)</span>                           
                        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">connectionFlagged</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">newSerConnectionsFlagged</span> <span class="p">):</span>
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> 
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;t</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>     
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">uName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> 
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;t</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>     
                                <span class="n">newSerConnectionsFlagged</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                    
            <span class="n">serPlaces</span> <span class="o">=</span> <span class="n">newSerPlaces</span>
            <span class="n">serTransitions</span> <span class="o">=</span> <span class="n">newSerTransitions</span>
            <span class="n">serConnections</span> <span class="o">=</span> <span class="p">[]</span>
            
            <span class="k">for</span> <span class="n">connectionFlagged</span> <span class="ow">in</span> <span class="n">newSerConnectionsFlagged</span><span class="p">:</span>
                <span class="n">serConnections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">connectionFlagged</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    
                  
            <span class="k">for</span> <span class="n">subnetName</span>  <span class="ow">in</span> <span class="n">subnetNames</span><span class="p">:</span> 
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">)</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>       
                    <span class="n">tmpSubnets</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">])</span>                    
                    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">transition</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serTransitions</span> <span class="p">):</span> 
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span> 
                            <span class="n">serTransitions</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span> 
                    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">place</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serPlaces</span> <span class="p">):</span> 
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span> 
                            <span class="n">serPlaces</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span>    
                    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">connection</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serConnections</span> <span class="p">):</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connection</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connection</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span> 
                            <span class="n">serConnections</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span>       
                    <span class="k">continue</span>      
                
                <span class="k">for</span> <span class="n">editor2</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">editor2</span><span class="o">.</span><span class="n">subnet</span> <span class="p">):</span>
                        <span class="n">newName</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_2&quot;</span><span class="o">%</span><span class="n">subnetName</span>  
                        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">transition</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serTransitions</span> <span class="p">):</span>     
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">):</span>
                                <span class="n">serTransitions</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">newName</span>  
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">):</span>
                                <span class="n">serTransitions</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">newName</span> 
                                <span class="n">serTransitions</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">newName</span> 
                                
                        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">place</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serPlaces</span> <span class="p">):</span> 
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">):</span>
                                <span class="n">serPlaces</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">newName</span>    
                        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">connection</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">serConnections</span> <span class="p">):</span> 
                            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">connection</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetName</span> <span class="p">):</span>
                                <span class="n">serConnections</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">newName</span> 
                                   
                        <span class="n">tmpSubnets</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">newName</span><span class="p">])</span>                        
            <span class="n">tmpSubnets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createSubnetItemLists</span><span class="p">(</span> <span class="n">tmpSubnets</span><span class="p">,</span> <span class="n">serPlaces</span><span class="p">,</span> <span class="n">serTransitions</span><span class="p">,</span> <span class="n">serConnections</span> <span class="p">)</span>            
                        
        <span class="k">else</span><span class="p">:</span>                    
            <span class="k">for</span> <span class="n">subnetName</span> <span class="ow">in</span> <span class="n">subnetNames</span><span class="p">:</span>
                <span class="n">tmpSubnets</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">subnetName</span><span class="p">])</span>
            <span class="n">tmpSubnets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createSubnetItemLists</span><span class="p">(</span> <span class="n">tmpSubnets</span><span class="p">,</span> <span class="n">serPlaces</span><span class="p">,</span> <span class="n">serTransitions</span><span class="p">,</span> <span class="n">serConnections</span> <span class="p">)</span> 
                
        
                
        <span class="n">subnetConnections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createItemsAssignToEditor</span><span class="p">(</span> <span class="n">editor</span><span class="p">,</span> <span class="n">subnet</span><span class="p">,</span> <span class="n">tmpSubnets</span><span class="p">,</span> <span class="n">importSubnet</span><span class="o">=</span><span class="n">importSubnet</span> <span class="p">)</span>
        
        
            
        <span class="k">for</span> <span class="n">connection</span> <span class="ow">in</span> <span class="n">subnetConnections</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">connection</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
              
        <span class="n">subnetConnections</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookupSubstitutionConnectors</span><span class="p">(</span> <span class="n">subnetConnections</span> <span class="p">)</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">initialMarking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">get_marking</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">resetSimulator</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>            
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">getActualMarking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">initialMarking</span><span class="p">)</span>  
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">importSubnet</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">subnets</span> <span class="o">=</span> <span class="n">tmpSubnets</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">subnets</span> <span class="o">+=</span> <span class="n">tmpSubnets</span></div>
            
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
    
<div class="viewcode-block" id="MainWindow.createSubnetItemLists"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.createSubnetItemLists">[docs]</a>    <span class="k">def</span> <span class="nf">createSubnetItemLists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tmpSubnets</span><span class="p">,</span> <span class="n">serPlaces</span><span class="p">,</span> <span class="n">serTransitions</span><span class="p">,</span> <span class="n">serConnections</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Assign subnet to items.</span>
<span class="sd">        </span>
<span class="sd">        :param tmpSubnets: List of subnet names</span>
<span class="sd">        :param serPlaces: List with parameters for the Place generation: [[uniqueName, name, portClone, port, [pos], [initMarking]],...].</span>
<span class="sd">        :param serTransitions: List with parameters for the Transition generation: [[uniqueName, name, [pos], guardExpression, subnet],...].</span>
<span class="sd">        :param serConnections: List with parameters for the Connection generation: [[uniqueNameSRC, uniqueNameDST, name, sourceConnector, destinationConnector],...].</span>
<span class="sd">        :return newTmpSubnets: List of subnet names and corresponding items [&quot;subnet&quot;,[items]].</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">newTmpSubnets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span> <span class="n">tmpSubnets</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">subnetList</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">newTmpSubnets</span> <span class="p">):</span>   
            <span class="k">for</span> <span class="n">subnetRef</span><span class="p">,</span> <span class="n">place</span> <span class="ow">in</span> <span class="n">serPlaces</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetRef</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span>
                    <span class="n">newTmpSubnets</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">place</span> <span class="p">)</span>           
            <span class="k">for</span> <span class="n">subnetRef</span><span class="p">,</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">serTransitions</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetRef</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span>
                    <span class="n">newTmpSubnets</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">transition</span> <span class="p">)</span>           
            <span class="k">for</span> <span class="n">subnetRef</span><span class="p">,</span> <span class="n">connection</span> <span class="ow">in</span> <span class="n">serConnections</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetRef</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span>
                    <span class="n">newTmpSubnets</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">connection</span> <span class="p">)</span>
        <span class="k">return</span> <span class="n">newTmpSubnets</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
            
    
<div class="viewcode-block" id="MainWindow.initNetFromFile"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.initNetFromFile">[docs]</a>    <span class="k">def</span> <span class="nf">initNetFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor</span><span class="p">,</span> <span class="n">subnetList</span><span class="p">):</span>     
        <span class="sd">&#39;&#39;&#39;Create all items for a subnet.</span>
<span class="sd">        </span>
<span class="sd">        :param editor: `gui.DiagramEditor` subnet.</span>
<span class="sd">        :param subnetList: &quot;subnet&quot;,[items].</span>
<span class="sd">        :return places, transitions, connectionsInSubnet: List of visual places, List of visual Transitions, list of visualk connections.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">places</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">transitions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">connectionsInSubnet</span> <span class="o">=</span> <span class="p">[]</span>
                
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="nb">list</span> <span class="p">):</span> 
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                    <span class="n">tokens</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
                    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">item</span><span class="p">[</span><span class="mi">5</span><span class="p">]:</span>
                        <span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">token</span><span class="p">))</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">PlaceItem</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QPointF</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">])),</span> <span class="n">initMarking</span><span class="o">=</span><span class="n">tokens</span><span class="p">,</span> <span class="n">uniqueName</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">loadFromFile</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">portDirection</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">subnet</span><span class="o">=</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">)</span>
                    <span class="n">places</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">,</span> <span class="n">p</span><span class="p">]</span> <span class="p">)</span>
                
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">list</span> <span class="p">):</span>  
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">TransitionItem</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="n">QtCore</span><span class="o">.</span><span class="n">QPointF</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])),</span> <span class="n">guardExpression</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">uniqueName</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">loadFromFile</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">subnet</span><span class="o">=</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="n">TransitionItem</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="n">QtCore</span><span class="o">.</span><span class="n">QPointF</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])),</span> <span class="n">guardExpression</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">uniqueName</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">loadFromFile</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">subnet</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">substitutionTransition</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">transitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="p">)</span> 
                
            <span class="k">else</span><span class="p">:</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">connectArcs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span><span class="p">,</span> <span class="n">item</span><span class="p">]</span> <span class="p">)</span>
                <span class="n">connectionsInSubnet</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>

        <span class="n">higherNameBase</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">highestNameBase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>
        <span class="n">oldNameBase</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span>
         
        <span class="k">while</span> <span class="n">higherNameBase</span><span class="p">:</span>                     
            <span class="k">for</span> <span class="n">place</span> <span class="ow">in</span> <span class="n">places</span><span class="p">:</span>
                <span class="n">pId</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">pId</span> <span class="o">&gt;</span> <span class="n">highestNameBase</span><span class="p">:</span>
                    <span class="n">highestNameBase</span> <span class="o">=</span> <span class="n">pId</span>
                                   
            <span class="k">for</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">transitions</span><span class="p">:</span>
                <span class="n">tId</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                <span class="k">if</span> <span class="n">tId</span> <span class="o">&gt;</span> <span class="n">highestNameBase</span><span class="p">:</span>
                    <span class="n">highestNameBase</span> <span class="o">=</span> <span class="n">tId</span>
                                                 
            <span class="k">if</span> <span class="n">oldNameBase</span> <span class="o">==</span> <span class="n">highestNameBase</span><span class="p">:</span>
                <span class="n">higherNameBase</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">oldNameBase</span> <span class="o">=</span> <span class="n">highestNameBase</span>
         
        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">uniqueNameBase</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="n">highestNameBase</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">places</span><span class="p">,</span> <span class="n">transitions</span><span class="p">,</span> <span class="n">connectionsInSubnet</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
           
      
<div class="viewcode-block" id="MainWindow.createItemsAssignToEditor"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.createItemsAssignToEditor">[docs]</a>    <span class="k">def</span> <span class="nf">createItemsAssignToEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor</span><span class="p">,</span> <span class="n">subnet</span><span class="p">,</span> <span class="n">tmpSubnets</span><span class="p">,</span> <span class="n">importSubnet</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Assign places, transition and connections to subnet editors</span>
<span class="sd">        </span>
<span class="sd">        :param editor: `gui.DiagramEditor` subnet.</span>
<span class="sd">        :param subnet: Subnet string name.</span>
<span class="sd">        :param tmpSubnets: List of subnet names and corresponding items [&quot;subnet&quot;,[items]].</span>
<span class="sd">        :param importSubnet: Flag determining, whethera new net is loaded or a subnet is imported.</span>
<span class="sd">        :return subnetConnections: List of connection in subnet for later inter subnet processing.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mappingUniqueName</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">subnetConnections</span> <span class="o">=</span> <span class="p">[]</span>             
        
        <span class="k">for</span> <span class="n">subnetList</span> <span class="ow">in</span> <span class="n">tmpSubnets</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">editor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">editor</span><span class="o">.</span><span class="n">subnet</span> <span class="o">=</span> <span class="n">subnet</span>    
                    
                <span class="n">subPlaces</span><span class="p">,</span> <span class="n">subTransitions</span><span class="p">,</span> <span class="n">connectionsInSubnet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initNetFromFile</span><span class="p">(</span> <span class="n">editor</span><span class="p">,</span> <span class="n">subnetList</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">subPlace</span> <span class="ow">in</span> <span class="n">subPlaces</span><span class="p">:</span>
                    <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">subnet</span> <span class="o">=</span> <span class="n">subnet</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> \
                            <span class="ow">or</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                        <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="o">=</span> <span class="n">Place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span> <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="p">)</span>                 
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">places</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Place added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Port: </span><span class="si">%s</span><span class="s2"> - Tokens: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portDirection</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span><span class="p">)</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        
                <span class="k">for</span> <span class="n">subTransition</span> <span class="ow">in</span> <span class="n">subTransitions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="o">=</span> <span class="n">Transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">Expression</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span> <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="p">)</span> 
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">transitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                            <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Transition added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Guard Expression: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span> 
<span class="c1">#                 editor = None </span>
                            
            <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">subnet</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;pyPetriNets - </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
                <span class="n">subPlaces</span><span class="p">,</span> <span class="n">subTransitions</span><span class="p">,</span> <span class="n">connectionsInSubnet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initNetFromFile</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">subnetList</span> <span class="p">)</span>
                <span class="k">for</span> <span class="n">subPlace</span> <span class="ow">in</span> <span class="n">subPlaces</span><span class="p">:</span>
                    <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">subnet</span> <span class="o">=</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span> \
                            <span class="ow">or</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                        <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="o">=</span> <span class="n">Place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span> <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="p">)</span>                 
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">places</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                        <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Place added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Port: </span><span class="si">%s</span><span class="s2"> - Tokens: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portDirection</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span><span class="p">)</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        
                <span class="k">for</span> <span class="n">subTransition</span> <span class="ow">in</span> <span class="n">subTransitions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="o">=</span> <span class="n">Transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">Expression</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span> <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="p">)</span> 
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">transitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                            <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Transition added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Guard Expression: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                                
                <span class="bp">self</span><span class="o">.</span><span class="n">addSubnetEditor</span><span class="p">(</span> <span class="n">subnetList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>    
                <span class="n">subPlaces</span><span class="p">,</span> <span class="n">subTransitions</span><span class="p">,</span> <span class="n">connectionsInSubnet</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initNetFromFile</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">subnetList</span> <span class="p">)</span>
                
                
                
                <span class="k">for</span> <span class="n">subPlace</span> <span class="ow">in</span> <span class="n">subPlaces</span><span class="p">:</span>      
                    <span class="k">if</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span> <span class="s2">&quot;i&quot;</span> <span class="ow">in</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portDirection</span> <span class="ow">and</span> <span class="s2">&quot;o&quot;</span> <span class="ow">in</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portDirection</span> <span class="p">)</span> <span class="p">)</span> \
                            <span class="ow">or</span> <span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
                        <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="o">=</span> <span class="n">Place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span> <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_place</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">place</span> <span class="p">)</span>                  
                        <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">places</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                        <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Place added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Port: </span><span class="si">%s</span><span class="s2"> - Tokens: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">portDirection</span><span class="p">,</span> <span class="n">subPlace</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">initMarking</span><span class="p">)</span>
                        <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                        <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        
                <span class="k">for</span> <span class="n">subTransition</span> <span class="ow">in</span> <span class="n">subTransitions</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="o">=</span> <span class="n">Transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">Expression</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span> <span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">add_transition</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transition</span> <span class="p">)</span> 
                            <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">transitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
                            <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Transition added. Unique Name: </span><span class="si">%s</span><span class="s2"> - Display Name: </span><span class="si">%s</span><span class="s2"> - Guard Expression: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subTransition</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">guardExpression</span><span class="p">)</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span>
                        <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
                            <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
                            <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">red</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span> 
                            
                            
            <span class="n">subnetConnections</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">connectionsInSubnet</span> <span class="p">)</span>     
                          
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">place</span><span class="p">())</span> <span class="p">)</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">transition</span><span class="p">())</span> <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">subnetConnections</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    

<div class="viewcode-block" id="MainWindow.lookupSubstitutionConnectors"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.lookupSubstitutionConnectors">[docs]</a>    <span class="k">def</span> <span class="nf">lookupSubstitutionConnectors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subnetConnections</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Lookup and substitute connectors.</span>
<span class="sd">        </span>
<span class="sd">        :param subnetConnections: List of connection in subnet for inter subnet processing.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">lengthSubnetConnections</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="n">subnetConnections</span> <span class="p">)</span>
        <span class="n">lengthSubnetSimulator</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">subnets</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">lengthSubnetSimulator</span><span class="p">,</span> <span class="n">lengthSubnetConnections</span> <span class="o">+</span> <span class="n">lengthSubnetSimulator</span> <span class="p">):</span>            
            <span class="k">for</span> <span class="n">subArc</span> <span class="ow">in</span> <span class="n">subnetConnections</span><span class="p">[</span><span class="n">idx</span> <span class="o">-</span> <span class="n">lengthSubnetSimulator</span><span class="p">]:</span>
                
                <span class="n">foundSrcConnector</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">foundDstConnector</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">for</span> <span class="n">place</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">visualPlaces</span><span class="p">:</span>   
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">foundSrcConnector</span><span class="p">:</span> 
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>
                            <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">place</span><span class="o">.</span><span class="n">connectorList</span><span class="p">[</span> <span class="nb">int</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">]</span>    
                            <span class="n">foundSrcConnector</span> <span class="o">=</span> <span class="bp">True</span>                              
                        <span class="k">elif</span>  <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>  
                            <span class="n">foundSrcConnector</span> <span class="o">=</span> <span class="bp">True</span>             
                            
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">foundDstConnector</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">place</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>                                
                            <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">place</span><span class="o">.</span><span class="n">connectorList</span><span class="p">[</span>  <span class="nb">int</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span>  <span class="p">]</span> 
                            <span class="n">foundDstConnector</span> <span class="o">=</span> <span class="bp">True</span>                
                        <span class="k">elif</span>  <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>  
                            <span class="n">foundDstConnector</span> <span class="o">=</span> <span class="bp">True</span>                                       
                                     
                <span class="k">for</span> <span class="n">transition</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">visualTransitions</span><span class="p">:</span>   
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">foundSrcConnector</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span> 
                            <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="o">=</span> <span class="n">transition</span><span class="o">.</span><span class="n">connectorList</span><span class="p">[</span>  <span class="nb">int</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>  <span class="p">]</span>   
                            <span class="n">foundSrcConnector</span> <span class="o">=</span> <span class="bp">True</span>                
                        <span class="k">elif</span>  <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>  
                            <span class="n">foundSrcConnector</span> <span class="o">=</span> <span class="bp">True</span>  
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">foundDstConnector</span><span class="p">:</span>
                        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span> <span class="n">transition</span><span class="o">.</span><span class="n">uniqueName</span> <span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>
                            <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">transition</span><span class="o">.</span><span class="n">connectorList</span><span class="p">[</span>  <span class="nb">int</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span>  <span class="p">]</span>   
                            <span class="n">foundDstConnector</span> <span class="o">=</span> <span class="bp">True</span>                     
                        <span class="k">elif</span>  <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">Connector</span> <span class="p">):</span>    
                            <span class="n">foundDstConnector</span> <span class="o">=</span> <span class="bp">True</span>   
                                
                <span class="k">if</span> <span class="n">foundSrcConnector</span> <span class="ow">and</span> <span class="n">foundDstConnector</span><span class="p">:</span>
                    <span class="n">newArc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setArc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="c1">#                     print(&quot;FOUND Arc&quot;, subArc[3].parent.uniqueName, newArc, subArc[4].parent.uniqueName, subArc[3].idx , subArc[4].idx )</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found Arc </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%d</span><span class="s2"> </span><span class="si">%d</span><span class="s2"> &quot;</span><span class="o">%</span><span class="p">(</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">newArc</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span> <span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span> <span class="p">)</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">connectionList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">[</span><span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">newArc</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span> <span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">idx</span><span class="p">]</span> <span class="p">)</span>
                    <span class="n">infoString</span> <span class="o">=</span> <span class="s2">&quot;Arc Connection added. Source Unique Name: </span><span class="si">%s</span><span class="s2"> - Source Name: </span><span class="si">%s</span><span class="s2"> - Destination Unique Name: </span><span class="si">%s</span><span class="s2"> - Destination Name: </span><span class="si">%s</span><span class="s2"> - Annotation: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">uniqueName</span><span class="p">,</span> <span class="n">subArc</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">newArc</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QListWidgetItem</span><span class="p">(</span> <span class="n">infoString</span> <span class="p">)</span>
                    <span class="n">item</span><span class="o">.</span><span class="n">setTextColor</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">green</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logWidget</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span> <span class="n">item</span> <span class="p">)</span></div>

    <span class="c1">#------------------------------------------------------------------------------------------------</span>
        
        
<div class="viewcode-block" id="MainWindow.setArc"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.setArc">[docs]</a>    <span class="k">def</span> <span class="nf">setArc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editor</span><span class="p">,</span> <span class="n">srcConnector</span><span class="p">,</span> <span class="n">dstConnector</span><span class="p">,</span> <span class="n">itemName</span><span class="p">):</span>   
        <span class="sd">&#39;&#39;&#39;Create arcs based on new uniqueNames.</span>
<span class="sd">        </span>
<span class="sd">        :param editor: `gui.DiagramEditor` subnet.</span>
<span class="sd">        :param srcConnector: Source `model.AbstractItem.Connector`.</span>
<span class="sd">        :param dstConnector: Destination `model.AbstractItem.Connector`.</span>
<span class="sd">        :param itemName: Annotation text.</span>
<span class="sd">        :return newArc: Newly created `model.ArcItem`.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">newArc</span> <span class="o">=</span> <span class="n">ArcItem</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span> <span class="n">srcConnector</span><span class="p">,</span> <span class="n">dstConnector</span><span class="p">)</span>
        <span class="n">newArc</span><span class="o">.</span><span class="n">setEndPos</span><span class="p">(</span><span class="n">dstConnector</span><span class="o">.</span><span class="n">scenePos</span><span class="p">())</span>  
        <span class="n">newArc</span><span class="o">.</span><span class="n">setDestination</span><span class="p">(</span><span class="n">dstConnector</span><span class="p">)</span>      
        <span class="n">newArc</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="n">itemName</span><span class="p">)</span> 

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">PlaceItem</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                        <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">port</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">)</span> \
                        <span class="ow">and</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                        <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">portClone</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                <span class="k">pass</span>  
            <span class="k">else</span><span class="p">:</span>      
                <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">PlaceItem</span><span class="p">):</span> 
            <span class="k">if</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                        <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">port</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">)</span> \
                        <span class="ow">and</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">portClone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                        <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">portClone</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                <span class="k">pass</span>  
            <span class="k">else</span><span class="p">:</span>      
                <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>
                 
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">TransitionItem</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>             
                <span class="k">if</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">subnet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                            <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">srcConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">subnet</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                    <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>   
                    <span class="k">pass</span>  
            <span class="k">else</span><span class="p">:</span>      
                <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>                
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">TransitionItem</span><span class="p">):</span> 
            <span class="k">if</span> <span class="ow">not</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">substitutionTransition</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">subnet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> \
                            <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span> <span class="n">dstConnector</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">subnet</span> <span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="s2">&quot;None&quot;</span><span class="p">):</span>
                    <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>   
                    <span class="k">pass</span>                            
            <span class="k">else</span><span class="p">:</span>      
                <span class="n">newArc</span><span class="o">.</span><span class="n">setArcAnnotation</span><span class="p">(</span> <span class="n">annotationText</span><span class="o">=</span><span class="n">itemName</span> <span class="p">)</span>
                
        <span class="k">return</span> <span class="n">newArc</span></div>
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
    
        
<div class="viewcode-block" id="MainWindow.export_Step_as_SVG"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.export_Step_as_SVG">[docs]</a>    <span class="k">def</span> <span class="nf">export_Step_as_SVG</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Export Petrinet and subnets to seperate SVG files&#39;&#39;&#39;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Export Step as SVG&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/output/svg/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workingDir</span><span class="p">)</span> <span class="p">,</span> <span class="s2">&quot;*.svg&quot;</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">return</span>
        
        <span class="n">iterString</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>        
        <span class="k">for</span> <span class="n">editor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">editor</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">editors</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">iterString</span> <span class="o">=</span> <span class="s2">&quot;_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">iterString</span> <span class="o">=</span> <span class="s2">&quot;_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span><span class="n">editor</span><span class="o">.</span><span class="n">subnet</span>
                
            <span class="n">generator</span> <span class="o">=</span> <span class="n">QtSvg</span><span class="o">.</span><span class="n">QSvgGenerator</span><span class="p">()</span>
            <span class="n">newFilename</span> <span class="o">=</span> <span class="n">filename</span>
            <span class="k">if</span> <span class="s2">&quot;.svg&quot;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">newFilename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.svg&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">iterString</span><span class="o">+</span><span class="s2">&quot;.svg&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newFilename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">+</span><span class="n">iterString</span><span class="o">+</span><span class="s2">&quot;.svg&quot;</span>
                        
            <span class="n">generator</span><span class="o">.</span><span class="n">setFileName</span><span class="p">(</span><span class="n">newFilename</span><span class="p">)</span>            
            <span class="n">rect</span> <span class="o">=</span> <span class="n">editor</span><span class="o">.</span><span class="n">diagramScene</span><span class="o">.</span><span class="n">sceneRect</span><span class="p">()</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">setSize</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">setViewBox</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span> <span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
            <span class="n">generator</span><span class="o">.</span><span class="n">setTitle</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> Step </span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">net</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">displayStep</span><span class="p">))</span>
            <span class="n">painter</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QPainter</span><span class="p">()</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">begin</span><span class="p">(</span><span class="n">generator</span><span class="p">)</span>
            <span class="n">editor</span><span class="o">.</span><span class="n">diagramScene</span><span class="o">.</span><span class="n">render</span><span class="p">(</span> <span class="n">painter</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">rect</span> <span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">KeepAspectRatio</span><span class="p">)</span>
            <span class="n">painter</span><span class="o">.</span><span class="n">end</span><span class="p">()</span></div>
        
    <span class="c1">#------------------------------------------------------------------------------------------------</span>
        
    
<div class="viewcode-block" id="MainWindow.closeEvent"><a class="viewcode-back" href="../../gui_link.html#gui.MainWindow.MainWindow.closeEvent">[docs]</a>    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Close window event.</span>
<span class="sd">        </span>
<span class="sd">        :param event: `QtGui.closeEvent`.</span>
<span class="sd">        &#39;&#39;&#39;</span></div></div>
    <span class="c1">#-------------------------------------------------------------------------------------------------------------------------</span>
        
<span class="c1">#==============================================================================================================================</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Christoph Kuhr.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>